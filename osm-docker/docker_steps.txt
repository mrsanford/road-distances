# build the image
docker build -t osm-docker . 

# run the container
docker run -d \
  --name osm-virginia \
  --platform linux/amd64 \
  -p 5432:5432 \
  osm-virginia

# verify the container
docker ps -a
## if not
docker start osm-virginia

# accessing the database
docker exec -it osm-virginia psql -U postgres -d gis
## inside pgsql
\dx
SELECT PostGIS_Version();

# cleaning up the container
docker stop osm-virginia
docker rm osm-virginia

# # docker steps for terminal 
# # 
# docker run -d \
#   --name osm-virginia \
#   --platform linux/amd64 \
#   -e POSTGRES_USER=postgres \
#   -e POSTGRES_PASSWORD=roads \
#   -p 5432:5432 \
#   postgis/postgis:16-3.4
# # check container is running
# docker ps -a
# # if not started
# docker start osm-virginia
# # connect to psql inside container
# docker exec -it osm-virginia psql -U postgres -d postgres
# # verifying postgis works
# \dx
# SELECT PostGIS_Version();
# # creating postgis if not installed
# CREATE EXTENSION postgis;
# # downloading .osm.pbf
# wget https://download.geofabrik.de/north-america/us/virginia-latest.osm.pbf
